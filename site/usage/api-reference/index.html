<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://deltadatabase.readthedocs.io/usage/api-reference/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>API Reference - DeltaDatabase</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API Reference";
        var mkdocs_page_input_path = "usage/api-reference.md";
        var mkdocs_page_url = "/usage/api-reference/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> DeltaDatabase
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">API Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#post-apilogin">POST /api/login</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#health">Health</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#get-health">GET /health</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#entities">Entities</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#put-entitydatabase">PUT /entity/{database}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-entitydatabasekeyentitykey">GET /entity/{database}?key={entityKey}</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#schemas">Schemas</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#get-adminschemas">GET /admin/schemas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-schemaschemaid">GET /schema/{schemaID}</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#put-schemaschemaid">PUT /schema/{schemaID}</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#api-keys">API Keys</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#post-apikeys">POST /api/keys</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-apikeys">GET /api/keys</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#delete-apikeysid">DELETE /api/keys/{id}</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#admin">Admin</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#get-adminworkers">GET /admin/workers</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#error-format">Error Format</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#request-limits">Request Limits</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../schemas/">JSON Schema Templates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deployment/">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../security/">Security Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../frontend/">Management UI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../benchmarks/">Benchmark Results</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Examples</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../examples/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../examples/chat-app/">Chat Application</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../examples/user-profiles/">User Profiles</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../examples/iot-sensors/">IoT Sensor Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../examples/config-store/">Configuration Store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../examples/ecommerce/">E-Commerce Catalogue</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/architecture/">Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/project-structure/">Project Structure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/building/">Building from Source</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/testing/">Testing</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">DeltaDatabase</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Usage</li>
      <li class="breadcrumb-item active">API Reference</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/DeltaRule/DeltaDatabase/edit/master/docs/usage/api-reference.md">Edit on DeltaRule/DeltaDatabase</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="rest-api-reference">REST API Reference<a class="headerlink" href="#rest-api-reference" title="Permanent link">&para;</a></h1>
<p>All endpoints are served by the <strong>Main Worker</strong> at the configured <code>-rest-addr</code> (default <code>127.0.0.1:8080</code>).</p>
<p>Entity endpoints require an <code>Authorization: Bearer &lt;token&gt;</code> header. See <a href="authentication">Authentication</a> for how to obtain credentials.</p>
<hr />
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h2>
<h3 id="post-apilogin"><code>POST /api/login</code><a class="headerlink" href="#post-apilogin" title="Permanent link">&para;</a></h3>
<p>Exchange an admin key or API key for a short-lived session token. The session token inherits the permissions of the key used.</p>
<p><strong>Request:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">POST /api/login</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{&quot;key&quot;: &quot;YOUR_ADMIN_OR_API_KEY&quot;}</span>
</code></pre></div>

<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w">       </span><span class="s2">&quot;bWDQOfIs…&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;client_id&quot;</span><span class="p">:</span><span class="w">   </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;2026-02-26T09:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;read&quot;</span><span class="p">,</span><span class="s2">&quot;write&quot;</span><span class="p">,</span><span class="s2">&quot;admin&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Dev-mode only</strong> (when no <code>-admin-key</code> is configured):</p>
<div class="codehilite"><pre><span></span><code><span class="err">POST /api/login</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{&quot;client_id&quot;: &quot;myapp&quot;}</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://127.0.0.1:8080/api/login<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;key&quot;:&quot;YOUR_ADMIN_KEY&quot;}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span>.token<span class="k">)</span>
</code></pre></div>

<hr />
<h2 id="health">Health<a class="headerlink" href="#health" title="Permanent link">&para;</a></h2>
<h3 id="get-health"><code>GET /health</code><a class="headerlink" href="#get-health" title="Permanent link">&para;</a></h3>
<p>Returns system health. No authentication required.</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="entities">Entities<a class="headerlink" href="#entities" title="Permanent link">&para;</a></h2>
<h3 id="put-entitydatabase"><code>PUT /entity/{database}</code><a class="headerlink" href="#put-entitydatabase" title="Permanent link">&para;</a></h3>
<p>Create or update one or more entities in a database. Requires <code>write</code> permission.</p>
<p><strong>Path parameter:</strong> <code>database</code> — name of the database (e.g., <code>chatdb</code>).</p>
<p><strong>Request:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">PUT /entity/chatdb</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;session_001&quot;: {&quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;}]},</span>
<span class="err">  &quot;session_002&quot;: {&quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hi there!&quot;}]}</span>
<span class="err">}</span>
</code></pre></div>

<p>The request body is a JSON <strong>object</strong> where each key is an entity key and each value is the entity's JSON document. Multiple entities can be written in a single request.</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400</code></td>
<td>Invalid JSON, schema validation failure, or body exceeds 1 MiB</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Missing or invalid Bearer token</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Token lacks <code>write</code> permission</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>http://127.0.0.1:8080/entity/chatdb<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;session_001&quot;: {&quot;messages&quot;: [{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:&quot;Hello!&quot;}]}}&#39;</span>
</code></pre></div>

<hr />
<h3 id="get-entitydatabasekeyentitykey"><code>GET /entity/{database}?key={entityKey}</code><a class="headerlink" href="#get-entitydatabasekeyentitykey" title="Permanent link">&para;</a></h3>
<p>Retrieve a single entity by key. Requires <code>read</code> permission.</p>
<p><strong>Path parameter:</strong> <code>database</code> — name of the database.</p>
<p><strong>Query parameter:</strong> <code>key</code> — entity key.</p>
<p><strong>Request:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">GET /entity/chatdb?key=session_001</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
</code></pre></div>

<p><strong>Response <code>200 OK</code></strong> — the entity's JSON document:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello!&quot;</span><span class="p">}]}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400</code></td>
<td>Missing <code>key</code> query parameter</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Missing or invalid Bearer token</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Token lacks <code>read</code> permission</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Entity not found</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;http://127.0.0.1:8080/entity/chatdb?key=session_001&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span>
</code></pre></div>

<hr />
<h2 id="schemas">Schemas<a class="headerlink" href="#schemas" title="Permanent link">&para;</a></h2>
<h3 id="get-adminschemas"><code>GET /admin/schemas</code><a class="headerlink" href="#get-adminschemas" title="Permanent link">&para;</a></h3>
<p>List all registered schema IDs. No authentication required.</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="s2">&quot;chat.v1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;user_credentials.v1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;user_chats.v1&quot;</span><span class="p">]</span>
</code></pre></div>

<hr />
<h3 id="get-schemaschemaid"><code>GET /schema/{schemaID}</code><a class="headerlink" href="#get-schemaschemaid" title="Permanent link">&para;</a></h3>
<p>Retrieve a JSON Schema document. No authentication required.</p>
<p><strong>Path parameter:</strong> <code>schemaID</code> — the schema identifier (e.g., <code>chat.v1</code>).</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;chat.v1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>404</code></td>
<td>Schema not found</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="put-schemaschemaid"><code>PUT /schema/{schemaID}</code><a class="headerlink" href="#put-schemaschemaid" title="Permanent link">&para;</a></h3>
<p>Create or replace a JSON Schema. Requires <code>write</code> permission.</p>
<p><strong>Path parameter:</strong> <code>schemaID</code> — the schema identifier.</p>
<p><strong>Request:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">PUT /schema/product.v1</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,</span>
<span class="err">  &quot;$id&quot;: &quot;product.v1&quot;,</span>
<span class="err">  &quot;type&quot;: &quot;object&quot;,</span>
<span class="err">  &quot;properties&quot;: {</span>
<span class="err">    &quot;name&quot;:  {&quot;type&quot;: &quot;string&quot;},</span>
<span class="err">    &quot;price&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;minimum&quot;: 0}</span>
<span class="err">  },</span>
<span class="err">  &quot;required&quot;: [&quot;name&quot;, &quot;price&quot;]</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400</code></td>
<td>Invalid JSON or invalid JSON Schema</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Missing or invalid Bearer token</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Token lacks <code>write</code> permission</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="api-keys">API Keys<a class="headerlink" href="#api-keys" title="Permanent link">&para;</a></h2>
<h3 id="post-apikeys"><code>POST /api/keys</code><a class="headerlink" href="#post-apikeys" title="Permanent link">&para;</a></h3>
<p>Create a new named API key with RBAC permissions. Requires <code>admin</code> permission.</p>
<p><strong>Request:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">POST /api/keys</span>
<span class="err">Authorization: Bearer &lt;admin-key-or-token&gt;</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;name&quot;: &quot;ci-deploy&quot;,</span>
<span class="err">  &quot;permissions&quot;: [&quot;read&quot;, &quot;write&quot;],</span>
<span class="err">  &quot;expires_in&quot;: &quot;7d&quot;</span>
<span class="err">}</span>
</code></pre></div>

<p><code>expires_in</code> is optional (e.g. <code>"24h"</code>, <code>"7d"</code>, <code>"30d"</code>). Omit for a non-expiring key.</p>
<p><strong>Response <code>201 Created</code></strong> (secret shown <strong>once only</strong>):</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w">          </span><span class="s2">&quot;a1b2c3d4e5f6a7b8&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w">        </span><span class="s2">&quot;ci-deploy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;secret&quot;</span><span class="p">:</span><span class="w">      </span><span class="s2">&quot;dk_abc123…&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;read&quot;</span><span class="p">,</span><span class="s2">&quot;write&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;2026-03-04T09:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;2026-02-25T09:00:00Z&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400</code></td>
<td>Missing name or permissions</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Missing or invalid Bearer token</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Token lacks <code>admin</code> permission</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="get-apikeys"><code>GET /api/keys</code><a class="headerlink" href="#get-apikeys" title="Permanent link">&para;</a></h3>
<p>List all API keys (secrets not returned). Requires <code>admin</code> permission.</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w">          </span><span class="s2">&quot;a1b2c3d4e5f6a7b8&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w">        </span><span class="s2">&quot;ci-deploy&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;key_hash&quot;</span><span class="p">:</span><span class="w">    </span><span class="s2">&quot;…&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;permissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;read&quot;</span><span class="p">,</span><span class="s2">&quot;write&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;2026-02-25T09:00:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w">     </span><span class="kc">true</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<hr />
<h3 id="delete-apikeysid"><code>DELETE /api/keys/{id}</code><a class="headerlink" href="#delete-apikeysid" title="Permanent link">&para;</a></h3>
<p>Permanently delete an API key by ID. Requires <code>admin</code> permission.</p>
<p><strong>Path parameter:</strong> <code>id</code> — the key's ID (from <code>GET /api/keys</code>).</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>

<p><strong>Error responses:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>401</code></td>
<td>Missing or invalid Bearer token</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Token lacks <code>admin</code> permission</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Key ID not found</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="admin">Admin<a class="headerlink" href="#admin" title="Permanent link">&para;</a></h2>
<h3 id="get-adminworkers"><code>GET /admin/workers</code><a class="headerlink" href="#get-adminworkers" title="Permanent link">&para;</a></h3>
<p>Returns all registered Processing Workers and their status. Requires <code>admin</code> permission.</p>
<p><strong>Response <code>200 OK</code>:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;worker_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proc-1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w">    </span><span class="s2">&quot;Available&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;key_id&quot;</span><span class="p">:</span><span class="w">    </span><span class="s2">&quot;main-key-v1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_seen&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2026-02-24T12:01:30Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w">      </span><span class="p">{</span><span class="nt">&quot;grpc_addr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1:50052&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;worker_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proc-2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w">    </span><span class="s2">&quot;Available&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;key_id&quot;</span><span class="p">:</span><span class="w">    </span><span class="s2">&quot;main-key-v1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_seen&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2026-02-24T12:01:28Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w">      </span><span class="p">{</span><span class="nt">&quot;grpc_addr&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1:50053&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<hr />
<h2 id="error-format">Error Format<a class="headerlink" href="#error-format" title="Permanent link">&para;</a></h2>
<p>All error responses return a JSON body with an <code>error</code> field:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;entity not found&quot;</span><span class="p">}</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>HTTP Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200</code></td>
<td>Success</td>
</tr>
<tr>
<td><code>201</code></td>
<td>Created (new API key)</td>
</tr>
<tr>
<td><code>400</code></td>
<td>Bad request (invalid JSON, schema violation, missing parameter)</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Unauthorized (missing or expired token)</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Forbidden (valid token but insufficient permissions)</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Not found (entity, schema, or API key does not exist)</td>
</tr>
<tr>
<td><code>413</code></td>
<td>Request body too large (exceeds 1 MiB limit)</td>
</tr>
<tr>
<td><code>500</code></td>
<td>Internal server error</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="request-limits">Request Limits<a class="headerlink" href="#request-limits" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Limit</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Maximum body size (PUT entity, PUT schema)</td>
<td>1 MiB</td>
</tr>
<tr>
<td>Entity key characters</td>
<td>No <code>/</code>, <code>\</code>, or <code>..</code> sequences</td>
</tr>
<tr>
<td>Database name characters</td>
<td>No <code>/</code>, <code>\</code>, or <code>..</code> sequences</td>
</tr>
<tr>
<td>Schema ID characters</td>
<td>No <code>/</code>, <code>\</code>, or <code>..</code> sequences</td>
</tr>
</tbody>
</table>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../configuration/" class="btn btn-neutral float-left" title="Configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../authentication/" class="btn btn-neutral float-right" title="Authentication">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/DeltaRule/DeltaDatabase" class="fa fa-code-fork" style="color: #fcfcfc"> DeltaRule/DeltaDatabase</a>
        </span>
    
    
      <span><a href="../configuration/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../authentication/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
