/* ── Reset & base ────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0f1117;
  --surface:  #1a1d27;
  --surface2: #252836;
  --border:   #2e3148;
  --accent:   #7c6af7;
  --accent-h: #9d8fff;
  --text:     #e2e4f0;
  --muted:    #7a7f9d;
  --danger:   #e05c5c;
  --success:  #4caf80;
  --radius:   10px;
  --sidebar-w: 260px;
  font-family: system-ui, -apple-system, sans-serif;
}

html, body { height: 100%; background: var(--bg); color: var(--text); }

a { color: var(--accent); text-decoration: none; }
a:hover { color: var(--accent-h); }

/* ── Utility ─────────────────────────────────────────────────── */
.sr-only { position: absolute; width: 1px; height: 1px; overflow: hidden; clip: rect(0,0,0,0); }

/* ── Buttons ─────────────────────────────────────────────────── */
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  padding: .55rem 1.2rem; border-radius: var(--radius);
  font-size: .875rem; font-weight: 600; cursor: pointer;
  border: 1px solid transparent; transition: background .15s, opacity .15s;
}
.btn--primary { background: var(--accent); color: #fff; }
.btn--primary:hover { background: var(--accent-h); }
.btn--ghost { background: transparent; color: var(--text); border-color: var(--border); }
.btn--ghost:hover { background: var(--surface2); }
.btn--full { width: 100%; }
.btn--sm { padding: .35rem .75rem; font-size: .8rem; }
.btn--xs { padding: .2rem .4rem; font-size: .75rem; }
.btn:disabled { opacity: .5; cursor: not-allowed; }

/* ── Flash messages ──────────────────────────────────────────── */
.flash-container {
  position: fixed; top: 1rem; left: 50%; transform: translateX(-50%);
  z-index: 999; display: flex; flex-direction: column; gap: .5rem; min-width: 300px;
}
.flash {
  padding: .7rem 1.2rem; border-radius: var(--radius);
  font-size: .875rem; text-align: center;
}
.flash--error   { background: #3b1d1d; border: 1px solid var(--danger);  color: #f7b4b4; }
.flash--success { background: #1a3027; border: 1px solid var(--success); color: #a0f0c8; }

/* ── Auth pages ──────────────────────────────────────────────── */
.auth-page {
  min-height: 100vh; display: flex; align-items: center; justify-content: center;
  padding: 1rem;
}
.auth-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 2.5rem 2rem; width: 100%; max-width: 380px;
}
.auth-logo { font-size: 1.6rem; text-align: center; margin-bottom: .25rem; }
.auth-subtitle { text-align: center; color: var(--muted); margin-bottom: 1.75rem; font-size: .875rem; }
.auth-form { display: flex; flex-direction: column; gap: .75rem; }
.auth-form label { font-size: .8rem; font-weight: 600; color: var(--muted); }
.auth-form input {
  background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text); padding: .65rem .9rem; font-size: .9rem; width: 100%;
  transition: border-color .15s;
}
.auth-form input:focus { outline: none; border-color: var(--accent); }
.auth-link { text-align: center; font-size: .85rem; color: var(--muted); margin-top: 1rem; }

/* ── App layout ──────────────────────────────────────────────── */
.app-layout {
  display: grid;
  grid-template-columns: var(--sidebar-w) 1fr;
  height: 100vh;
  overflow: hidden;
}

/* ── Sidebar ─────────────────────────────────────────────────── */
.sidebar {
  background: var(--surface); border-right: 1px solid var(--border);
  display: flex; flex-direction: column; overflow: hidden;
}
.sidebar-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: .9rem 1rem; border-bottom: 1px solid var(--border);
}
.sidebar-logo { font-weight: 700; font-size: .95rem; }
.chat-list { flex: 1; overflow-y: auto; padding: .5rem 0; }
.chat-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: .55rem 1rem; font-size: .875rem; color: var(--text);
  cursor: pointer; transition: background .12s; gap: .5rem;
}
.chat-item:hover { background: var(--surface2); }
.chat-item--active { background: var(--surface2); font-weight: 600; }
.chat-item-title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.chat-item-delete { opacity: 0; flex-shrink: 0; color: var(--muted); border: none; }
.chat-item:hover .chat-item-delete { opacity: 1; }
.sidebar-empty { padding: 1rem; color: var(--muted); font-size: .85rem; text-align: center; }
.sidebar-footer {
  border-top: 1px solid var(--border); padding: .6rem .75rem;
  display: flex; flex-direction: column; gap: .2rem;
}
.sidebar-link {
  display: block; padding: .45rem .5rem; border-radius: 6px;
  font-size: .85rem; color: var(--muted); transition: background .12s;
}
.sidebar-link:hover { background: var(--surface2); color: var(--text); }
.sidebar-link--btn {
  background: none; border: none; cursor: pointer; text-align: left; width: 100%;
}

/* ── Chat main area ──────────────────────────────────────────── */
.chat-main {
  display: flex; flex-direction: column; overflow: hidden;
}
.chat-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: .8rem 1.25rem; border-bottom: 1px solid var(--border);
  background: var(--surface); flex-shrink: 0;
}
.chat-title { font-size: 1rem; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.chat-model-select { flex-shrink: 0; margin-left: 1rem; }

.messages { flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
.message { display: flex; flex-direction: column; gap: .3rem; max-width: 780px; }
.message--user { align-self: flex-end; align-items: flex-end; }
.message--assistant { align-self: flex-start; align-items: flex-start; }
.message-role { font-size: .7rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; }
.message-content {
  padding: .65rem 1rem; border-radius: var(--radius); font-size: .9rem; line-height: 1.6;
  white-space: pre-wrap; word-break: break-word;
}
.message--user .message-content { background: var(--accent); color: #fff; }
.message--assistant .message-content { background: var(--surface); border: 1px solid var(--border); }

.message-form {
  display: flex; gap: .75rem; padding: 1rem 1.25rem;
  border-top: 1px solid var(--border); background: var(--surface); flex-shrink: 0;
}
#message-input {
  flex: 1; resize: none; overflow-y: auto; max-height: 160px;
  background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text); padding: .65rem .9rem; font-size: .9rem; font-family: inherit;
  transition: border-color .15s;
}
#message-input:focus { outline: none; border-color: var(--accent); }

.chat-empty {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 1rem; color: var(--muted);
}
.chat-empty-icon { font-size: 3rem; }

/* ── Shared page layout ──────────────────────────────────────── */
.page-layout { min-height: 100vh; padding: 2rem 1rem; display: flex; justify-content: center; }
.page-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 2rem; width: 100%; max-width: 580px; align-self: flex-start;
}
.page-card--wide { max-width: 960px; }
.page-card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.75rem; }
.page-card-header h1 { font-size: 1.3rem; }

/* ── Settings ────────────────────────────────────────────────── */
.settings-form { display: flex; flex-direction: column; gap: .75rem; }
.settings-section { display: flex; flex-direction: column; gap: .65rem; margin-bottom: 1.5rem; }
.settings-section h2 { font-size: 1rem; font-weight: 700; border-bottom: 1px solid var(--border); padding-bottom: .5rem; margin-bottom: .25rem; }
.settings-form label,
.settings-section label { font-size: .8rem; font-weight: 600; color: var(--muted); }
.settings-form input,
.settings-form select { background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); padding: .65rem .9rem; font-size: .9rem; width: 100%; }
.settings-form input:focus,
.settings-form select:focus { outline: none; border-color: var(--accent); }
.settings-hint { font-size: .8rem; color: var(--muted); }
.settings-optional { font-weight: 400; }

/* ── Select ──────────────────────────────────────────────────── */
.select {
  background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text); padding: .45rem .7rem; font-size: .85rem; cursor: pointer;
}
.select:focus { outline: none; border-color: var(--accent); }

/* ── Admin ───────────────────────────────────────────────────── */
.admin-section { margin-bottom: 2rem; }
.admin-section h2 { font-size: 1rem; font-weight: 700; border-bottom: 1px solid var(--border); padding-bottom: .5rem; margin-bottom: 1rem; }
.admin-table { width: 100%; border-collapse: collapse; font-size: .875rem; }
.admin-table th,
.admin-table td { padding: .6rem .75rem; text-align: left; border-bottom: 1px solid var(--border); }
.admin-table th { color: var(--muted); font-weight: 600; font-size: .78rem; text-transform: uppercase; }
.table-empty { text-align: center; color: var(--muted); }
.model-checklist { display: flex; flex-wrap: wrap; gap: .4rem .9rem; }
.model-checklist--inline { gap: .3rem .6rem; }
.checkbox-label { display: flex; align-items: center; gap: .3rem; font-size: .82rem; cursor: pointer; }
.checkbox-label input[type=checkbox] { accent-color: var(--accent); cursor: pointer; }
